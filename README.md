# Pocket Theatre Bot

Этот проект представляет собой телеграм-бота для интерактивного аудио-спектакля, который проводит пользователей по улицам Порту. Бот предоставляет аудио-треки, текстовые подсказки, геолокации и паузы, чтобы создать уникальный опыт погружения в историю.

## Основные функции

- **Аудио-треки**: Пользователи получают аудио-файлы, которые рассказывают историю и направляют их по маршруту.
- **Геолокации**: Бот отправляет координаты точек маршрута, чтобы пользователи могли следовать по реальным улицам Порту.
- **Текстовые подсказки**: Текстовые сообщения дополняют аудио-треки, предоставляя дополнительную информацию и инструкции.
- **Паузы**: Встроенные паузы позволяют пользователям наслаждаться видами и атмосферой города.
- **Статистика**: Администраторы могут отслеживать статистику использования бота, включая количество пользователей и завершенных маршрутов.

## Установка и запуск

### Установка

1. Клонируйте репозиторий:

    ```bash
    git clone git@github.com:ibragimovanm/Pocket_Theatre_group1.git
    ```

2. Создайте файл `.env` в корне проекта и заполните его по примеру `.env.example`:

    ```env
    BOT_TOKEN=your-telegram-bot-token
    POSTGRES_USER=dbuser
    POSTGRES_PASSWORD=dbpassword
    POSTGRES_DB=mydatabase
    DB_HOST=postgres
    DB_PORT=5432
    DATABASE_URL=postgreSQL\sqlite
    SECRET_KEY=your-secret-key
    ```

3. Запустите проект с помощью Docker:

    ```bash
    docker-compose up --build
    ```

### Запуск без Docker

1. Установите зависимости:

    ```bash
    pip install -r requirements.txt
    ```

2. Запустите миграции:

    ```bash
    alembic upgrade head
    ```

3. Запустите бота:

    ```bash
    python main.py
    ```

### Администрирование

Для управления данными используется административная панель, доступная по адресу `/admin`. Для входа в панель администратора необходимо использовать учетные данные, указанные в базе данных.


### Статистика

В проекте реализована система сбора и отображения статистики использования бота. Это позволяет администраторам отслеживать активность пользователей, количество завершенных маршрутов и взаимодействие с аудио-треками.


#### Модели в админ-панели

- **Треки**: Управление аудио-треками, фотографиями и анимациями.
- **Тексты**: Управление текстовыми подсказками для треков.
- **Геолокации**: Управление точками маршрута.
- **Паузы**: Управление временными паузами между треками.
- **Пользователи**: Управление пользователями Telegram и администраторами.
- **Статистика**: Просмотр общей статистики и статистики по трекам.
- **Промокоды**: Управление промокодами для доступа к спектаклю.

#### **Используемые технологии**

| Технология    | Описание                                     |
|---------------|----------------------------------------------|
| **Python**    | Основной язык программирования.              |
| **SQLAlchemy**| ORM для работы с базой данных.                |
| **Alembic**   | Управление миграциями базы данных.           |
| **Aiogram**   | Фреймворк для создания Telegram-ботов.       |
| **Docker**    | Контейнеризация приложения.                  |

#### **Структура проекта**

| Каталог      | Описание                                     |
|--------------|----------------------------------------------|
| **admin/**       | Модули для админ-панели.                      |
| **Alembic**   | Управление миграциями базы данных.           |
| **crud/**        | CRUD-операции для работы с базой данных.      |
| **db/**          | Модули для работы с базой данных.             |
| **handlers/**    | Обработчики сообщений для бота.               |
| **keyboards/**   | Клавиатуры для бота.                           |
| **media**   | Медиа файлы для спектакля.           |
| **middlewares**   | Для управления асинхронной сессией базы данных.           |
| **models/**      | Модели базы данных.                            |
| **states/**      | Состояния FSM для бота.                        |
| **utils/**       | Вспомогательные функции и утилиты.             |
| **config**      | Файл конфигурация приложения.                      |
| **main**      | Файл для запуска приложения.                      |

### Контакты

Еслиу вас есть вопросы или предложения, свяжитесь с нами:

- **Email**: linar@pocket-theatre.online
- **Website**: [www.pocket-theatre.online](https://www.pocket-theatre.online)